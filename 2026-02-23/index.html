<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Prompt Palette â€” Visual AI Image Prompt Builder</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{--bg:#0a0a0f;--card:#14141f;--accent:#7c3aed;--accent2:#a855f7;--text:#e2e8f0;--muted:#64748b;--glow:rgba(124,58,237,.3);--border:#1e1e2e}
body{font-family:'Segoe UI',system-ui,sans-serif;background:var(--bg);color:var(--text);min-height:100vh;overflow-x:hidden}
.header{text-align:center;padding:24px 16px 8px;position:relative}
.header h1{font-size:1.6rem;background:linear-gradient(135deg,#7c3aed,#ec4899);-webkit-background-clip:text;-webkit-text-fill-color:transparent;font-weight:800}
.header p{color:var(--muted);font-size:.8rem;margin-top:4px}
.categories{padding:8px 16px;display:flex;flex-direction:column;gap:16px;max-width:600px;margin:0 auto}
.cat-label{font-size:.7rem;text-transform:uppercase;letter-spacing:2px;color:var(--accent2);font-weight:700;margin-bottom:4px;display:flex;align-items:center;gap:6px}
.cat-label .icon{font-size:1rem}
.tiles{display:flex;flex-wrap:wrap;gap:8px}
.tile{padding:8px 14px;border-radius:20px;background:var(--card);border:1.5px solid var(--border);cursor:pointer;font-size:.82rem;transition:all .2s;user-select:none;position:relative;overflow:hidden}
.tile:hover{border-color:var(--accent);transform:translateY(-1px)}
.tile.selected{background:linear-gradient(135deg,rgba(124,58,237,.25),rgba(168,85,247,.15));border-color:var(--accent2);box-shadow:0 0 12px var(--glow)}
.tile.selected::before{content:'âœ“ ';font-size:.7rem}
.tile .emoji{margin-right:4px}
.output-section{max-width:600px;margin:20px auto;padding:0 16px}
.prompt-box{background:var(--card);border:1.5px solid var(--border);border-radius:16px;padding:16px;min-height:80px;position:relative;transition:border-color .3s}
.prompt-box.has-content{border-color:var(--accent)}
.prompt-label{font-size:.7rem;text-transform:uppercase;letter-spacing:2px;color:var(--muted);margin-bottom:8px}
.prompt-text{font-size:.9rem;line-height:1.6;color:var(--text);word-break:break-word;min-height:40px}
.prompt-text.empty{color:var(--muted);font-style:italic;font-size:.85rem}
.actions{display:flex;gap:8px;margin-top:12px;flex-wrap:wrap}
.btn{padding:10px 20px;border-radius:12px;border:none;font-size:.85rem;font-weight:600;cursor:pointer;transition:all .2s}
.btn-primary{background:linear-gradient(135deg,#7c3aed,#a855f7);color:#fff;flex:1}
.btn-primary:hover{transform:translateY(-1px);box-shadow:0 4px 15px var(--glow)}
.btn-secondary{background:var(--card);color:var(--text);border:1.5px solid var(--border)}
.btn-secondary:hover{border-color:var(--accent)}
.btn-shuffle{background:var(--card);color:var(--accent2);border:1.5px solid var(--accent);min-width:44px}
.toast{position:fixed;bottom:24px;left:50%;transform:translateX(-50%) translateY(100px);background:var(--accent);color:#fff;padding:10px 24px;border-radius:12px;font-size:.85rem;font-weight:600;transition:transform .3s;z-index:99;pointer-events:none}
.toast.show{transform:translateX(-50%) translateY(0)}
.history-section{max-width:600px;margin:20px auto;padding:0 16px 40px}
.history-label{font-size:.7rem;text-transform:uppercase;letter-spacing:2px;color:var(--muted);margin-bottom:8px}
.history-item{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:12px;margin-bottom:8px;font-size:.8rem;line-height:1.5;color:var(--muted);cursor:pointer;transition:all .2s}
.history-item:hover{border-color:var(--accent);color:var(--text)}
.neg-section{margin-top:8px}
.neg-toggle{font-size:.75rem;color:var(--accent2);cursor:pointer;text-decoration:underline;margin-bottom:6px;display:inline-block}
.style-preview{width:100%;height:120px;border-radius:12px;margin-top:12px;background:linear-gradient(135deg,#0a0a0f,#1a1a2e);display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}
.style-preview canvas{width:100%;height:100%}
.counter{position:fixed;top:12px;right:12px;background:var(--card);border:1px solid var(--border);border-radius:10px;padding:6px 12px;font-size:.7rem;color:var(--accent2);z-index:10}
</style>
</head>
<body>

<div class="counter" id="counter">0 selected</div>

<div class="header">
<h1>ðŸŽ¨ Prompt Palette</h1>
<p>Tap tiles to compose the perfect AI image prompt â€” no typing required</p>
</div>

<div class="categories" id="categories"></div>

<div class="output-section">
<div class="prompt-box" id="promptBox">
<div class="prompt-label">Generated Prompt</div>
<div class="prompt-text empty" id="promptText">Tap tiles above to start building...</div>
</div>
<div class="neg-section">
<span class="neg-toggle" id="negToggle">+ Negative prompt</span>
<div class="prompt-box" id="negBox" style="display:none;margin-top:8px">
<div class="prompt-label">Negative Prompt</div>
<div class="prompt-text" id="negText" style="font-size:.8rem"></div>
</div>
</div>
<div class="actions">
<button class="btn btn-shuffle" onclick="shuffleRandom()" title="Random">ðŸŽ²</button>
<button class="btn btn-secondary" onclick="clearAll()">Clear</button>
<button class="btn btn-primary" onclick="copyPrompt()">ðŸ“‹ Copy Prompt</button>
</div>
<div class="style-preview"><canvas id="vizCanvas"></canvas></div>
</div>

<div class="history-section" id="historySection" style="display:none">
<div class="history-label">ðŸ“œ Recent Prompts</div>
<div id="historyList"></div>
</div>

<div class="toast" id="toast">Copied!</div>

<script>
const DATA = [
  { name: "Subject", icon: "ðŸŽ¯", multi: false, tiles: [
    {l:"ðŸ‘© Portrait",v:"portrait of a person"},{l:"ðŸ™ï¸ Cityscape",v:"cityscape"},{l:"ðŸŒ² Landscape",v:"sweeping landscape"},{l:"ðŸ‰ Creature",v:"mythical creature"},{l:"ðŸš€ Sci-fi Scene",v:"science fiction scene"},{l:"ðŸ° Fantasy",v:"fantasy scene"},{l:"ðŸ• Food",v:"gourmet food photography"},{l:"ðŸ± Animal",v:"animal portrait"},{l:"ðŸŽ¸ Music",v:"musician performing"},{l:"ðŸ›ï¸ Architecture",v:"architectural photography"},{l:"ðŸ’Ž Abstract",v:"abstract composition"},{l:"ðŸŒŠ Ocean",v:"ocean scene"}
  ]},
  { name: "Style", icon: "ðŸ–Œï¸", multi: true, max:2, tiles: [
    {l:"ðŸ“¸ Photo",v:"photorealistic, 8k photograph"},{l:"ðŸŽ¨ Oil Paint",v:"oil painting style"},{l:"âœï¸ Pencil",v:"detailed pencil sketch"},{l:"ðŸŸª Cyberpunk",v:"cyberpunk aesthetic, neon"},{l:"ðŸŒ¸ Anime",v:"anime style, cel shaded"},{l:"ðŸ–¼ï¸ Baroque",v:"baroque painting"},{l:"ðŸ”² Pixel Art",v:"pixel art, retro game"},{l:"ðŸ’§ Watercolor",v:"delicate watercolor"},{l:"ðŸŽžï¸ Film Noir",v:"film noir, black and white"},{l:"ðŸª© Vaporwave",v:"vaporwave, pastel colors, retro"}
  ]},
  { name: "Mood", icon: "âœ¨", multi: true, max:2, tiles: [
    {l:"ðŸ˜Œ Serene",v:"serene, peaceful"},{l:"âš¡ Dramatic",v:"dramatic, intense"},{l:"ðŸŒˆ Whimsical",v:"whimsical, playful"},{l:"ðŸ˜± Horror",v:"dark, horror, unsettling"},{l:"ðŸ¥° Romantic",v:"romantic, soft"},{l:"ðŸ”¥ Epic",v:"epic, grandiose"},{l:"ðŸ¤– Futuristic",v:"futuristic, advanced"},{l:"ðŸ‚ Nostalgic",v:"nostalgic, warm vintage"}
  ]},
  { name: "Lighting", icon: "ðŸ’¡", multi: false, tiles: [
    {l:"ðŸŒ… Golden Hour",v:"golden hour lighting"},{l:"ðŸŒ™ Moonlit",v:"moonlit, cool blue tones"},{l:"ðŸ’œ Neon Glow",v:"neon glow lighting"},{l:"â˜€ï¸ Harsh Sun",v:"harsh midday sunlight"},{l:"ðŸ•¯ï¸ Candlelit",v:"candlelight, warm flickering"},{l:"âš¡ Lightning",v:"lightning storm illumination"},{l:"ðŸŒ«ï¸ Foggy",v:"soft fog, diffused light"},{l:"ðŸ”¦ Spotlight",v:"dramatic spotlight from above"}
  ]},
  { name: "Camera", icon: "ðŸ“·", multi: false, tiles: [
    {l:"ðŸ” Macro",v:"macro lens, extreme close-up"},{l:"ðŸŒ Wide Angle",v:"ultra wide angle lens"},{l:"ðŸ“ Top Down",v:"birds eye view, top down"},{l:"ðŸŽžï¸ 35mm",v:"shot on 35mm film, grain"},{l:"ðŸ“ Tilt-Shift",v:"tilt-shift miniature effect"},{l:"ðŸ”­ Telephoto",v:"telephoto compression"},{l:"ðŸ‘ï¸ Fish-eye",v:"fish-eye lens distortion"},{l:"â¬†ï¸ Low Angle",v:"low angle heroic shot"}
  ]},
  { name: "Detail Boost", icon: "ðŸ”§", multi: true, max:3, tiles: [
    {l:"âœ¨ HDR",v:"HDR, high dynamic range"},{l:"ðŸŽ¯ Sharp",v:"extremely detailed, sharp focus"},{l:"ðŸ† Award",v:"award-winning photography"},{l:"ðŸ–¥ï¸ 8K",v:"8K UHD resolution"},{l:"ðŸ“° Editorial",v:"editorial style, magazine quality"},{l:"ðŸŒ€ Depth",v:"shallow depth of field, bokeh"},{l:"ðŸ’Ž Ornate",v:"intricate, ornate details"},{l:"ðŸŽ¬ Cinematic",v:"cinematic composition, anamorphic"}
  ]}
];

const NEG_DEFAULTS = "blurry, low quality, distorted, deformed, watermark, text, signature, cropped, worst quality";
let selected = {};
let history = JSON.parse(localStorage.getItem('pp_history')||'[]');

function init() {
  const cont = document.getElementById('categories');
  DATA.forEach((cat, ci) => {
    const div = document.createElement('div');
    div.innerHTML = `<div class="cat-label"><span class="icon">${cat.icon}</span>${cat.name}${cat.multi?' <span style="opacity:.5;font-size:.6rem">(pick ${cat.max||'any'})</span>':''}</div><div class="tiles" id="cat-${ci}"></div>`;
    cont.appendChild(div);
    const tilesDiv = div.querySelector('.tiles');
    cat.tiles.forEach((t, ti) => {
      const tile = document.createElement('div');
      tile.className = 'tile';
      tile.textContent = t.l;
      tile.dataset.ci = ci;
      tile.dataset.ti = ti;
      tile.onclick = () => toggleTile(ci, ti, tile);
      tilesDiv.appendChild(tile);
    });
  });
  document.getElementById('negToggle').onclick = () => {
    const box = document.getElementById('negBox');
    box.style.display = box.style.display === 'none' ? 'block' : 'none';
    document.getElementById('negText').textContent = NEG_DEFAULTS;
  };
  renderHistory();
  initViz();
}

function toggleTile(ci, ti, el) {
  if (!selected[ci]) selected[ci] = new Set();
  const cat = DATA[ci];
  if (selected[ci].has(ti)) {
    selected[ci].delete(ti);
    el.classList.remove('selected');
  } else {
    if (!cat.multi) {
      selected[ci].forEach(oldTi => {
        document.querySelector(`[data-ci="${ci}"][data-ti="${oldTi}"]`)?.classList.remove('selected');
      });
      selected[ci].clear();
    } else if (cat.max && selected[ci].size >= cat.max) {
      const first = selected[ci].values().next().value;
      selected[ci].delete(first);
      document.querySelector(`[data-ci="${ci}"][data-ti="${first}"]`)?.classList.remove('selected');
    }
    selected[ci].add(ti);
    el.classList.add('selected');
  }
  updatePrompt();
}

function buildPrompt() {
  const parts = [];
  DATA.forEach((cat, ci) => {
    if (selected[ci]) {
      selected[ci].forEach(ti => parts.push(cat.tiles[ti].v));
    }
  });
  return parts.join(', ');
}

function updatePrompt() {
  const p = buildPrompt();
  const el = document.getElementById('promptText');
  const box = document.getElementById('promptBox');
  const count = Object.values(selected).reduce((a, s) => a + s.size, 0);
  document.getElementById('counter').textContent = `${count} selected`;
  if (p) {
    el.textContent = p;
    el.classList.remove('empty');
    box.classList.add('has-content');
  } else {
    el.textContent = 'Tap tiles above to start building...';
    el.classList.add('empty');
    box.classList.remove('has-content');
  }
  updateViz();
}

function copyPrompt() {
  const p = buildPrompt();
  if (!p) return;
  navigator.clipboard.writeText(p).then(() => {
    const t = document.getElementById('toast');
    t.classList.add('show');
    setTimeout(() => t.classList.remove('show'), 1500);
  });
  if (!history.includes(p)) {
    history.unshift(p);
    if (history.length > 10) history.pop();
    localStorage.setItem('pp_history', JSON.stringify(history));
    renderHistory();
  }
}

function clearAll() {
  document.querySelectorAll('.tile.selected').forEach(t => t.classList.remove('selected'));
  selected = {};
  updatePrompt();
}

function shuffleRandom() {
  clearAll();
  DATA.forEach((cat, ci) => {
    if (Math.random() > 0.25) {
      const count = cat.multi ? Math.ceil(Math.random() * (cat.max || 1)) : 1;
      const indices = [...Array(cat.tiles.length).keys()].sort(() => Math.random() - 0.5).slice(0, count);
      indices.forEach(ti => {
        const el = document.querySelector(`[data-ci="${ci}"][data-ti="${ti}"]`);
        if (el) toggleTile(ci, ti, el);
      });
    }
  });
}

function renderHistory() {
  const sec = document.getElementById('historySection');
  const list = document.getElementById('historyList');
  if (history.length === 0) { sec.style.display = 'none'; return; }
  sec.style.display = 'block';
  list.innerHTML = history.map(h => `<div class="history-item" onclick="copyText('${h.replace(/'/g, "\\'")}')">${h}</div>`).join('');
}

function copyText(t) {
  navigator.clipboard.writeText(t);
  const toast = document.getElementById('toast');
  toast.classList.add('show');
  setTimeout(() => toast.classList.remove('show'), 1500);
}

// Abstract visualization
let vizCtx, vizW, vizH;
const particles = [];
function initViz() {
  const c = document.getElementById('vizCanvas');
  vizCtx = c.getContext('2d');
  const r = c.parentElement.getBoundingClientRect();
  c.width = vizW = r.width * 2;
  c.height = vizH = r.height * 2;
  for (let i = 0; i < 60; i++) particles.push({x:Math.random()*vizW,y:Math.random()*vizH,r:Math.random()*3+1,vx:(Math.random()-.5)*.5,vy:(Math.random()-.5)*.5,hue:270});
  animViz();
}
function updateViz() {
  const count = Object.values(selected).reduce((a, s) => a + s.size, 0);
  const hue = (270 + count * 25) % 360;
  particles.forEach(p => { p.hue = hue + (Math.random() - .5) * 40; p.r = Math.random() * (2 + count * .5) + 1; });
}
function animViz() {
  vizCtx.fillStyle = 'rgba(10,10,15,0.15)';
  vizCtx.fillRect(0, 0, vizW, vizH);
  particles.forEach(p => {
    p.x += p.vx; p.y += p.vy;
    if (p.x < 0 || p.x > vizW) p.vx *= -1;
    if (p.y < 0 || p.y > vizH) p.vy *= -1;
    vizCtx.beginPath();
    vizCtx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
    vizCtx.fillStyle = `hsla(${p.hue},70%,60%,0.8)`;
    vizCtx.fill();
  });
  // connections
  const count = Object.values(selected).reduce((a, s) => a + s.size, 0);
  if (count > 0) {
    for (let i = 0; i < particles.length; i++) {
      for (let j = i + 1; j < particles.length; j++) {
        const dx = particles[i].x - particles[j].x;
        const dy = particles[i].y - particles[j].y;
        const dist = Math.sqrt(dx * dx + dy * dy);
        if (dist < 60 + count * 10) {
          vizCtx.beginPath();
          vizCtx.moveTo(particles[i].x, particles[i].y);
          vizCtx.lineTo(particles[j].x, particles[j].y);
          vizCtx.strokeStyle = `hsla(${particles[i].hue},60%,50%,${.15 * (1 - dist / (60 + count * 10))})`;
          vizCtx.stroke();
        }
      }
    }
  }
  requestAnimationFrame(animViz);
}

init();
</script>
</body>
</html>
